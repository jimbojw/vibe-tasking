---
id: "s076-design-ai-farkle-guide"
title: "Design AI Guide for Collaborative Sparkle (Themed Farkle) Game"
status: "Done"
priority: "Medium"
tags: "ai-guide;design;game;farkle;research;implementation"
resolution: "Implemented"
---

# Story: s076-design-ai-farkle-guide - Design AI Guide for Collaborative Farkle Game

## Description

As a Vibe Tasking enthusiast, I want to design an AI Guide that enables a user and an AI assistant to collaboratively play **Sparkle**, a themed version of Farkle using emojis and a project management narrative, so that we can explore novel interactive uses of AI assistants within the Vibe Tasking framework.

The "Sparkle" game will involve:

- An append-only log of JSON states (line-delimited JSON) to track game progress.
- A mechanism for the AI assistant to obtain dice roll outcomes (N numbers from 1-6, representing emoji faces), generated by a Pseudo-Random Number Generator (PRNG), by consulting the [`ai-guides/contrib/random-numbers-generating-guide.md`](../../../../ai-guides/contrib/random-numbers-generating-guide.md). The AI should not "make up" or "choose" the dice values.
- The AI assistant using `ask_followup_question` to learn the user's choices (hold dice, roll again).
- The AI assistant making its own decisions on its turn.
- Using specific emoji characters (detailed in `artifacts/sparkle-game-rules.md`) for displaying game state.

This story will cover the research of "Sparkle" game mechanics, design of the AI Guide, and implementation/testing of the guide.

## Artifacts

- `artifacts/sparkle-game-rules.md` (Rules for the new "Sparkle" themed game)
- `artifacts/sparkle-ai-interaction-points.md` (AI interaction points for "Sparkle")
- `artifacts/sparkle-json-log-structure.md` (Structure for the game state log for "Sparkle")
- [`ai-guides/contrib/random-numbers-generating-guide.md`](../../../../ai-guides/contrib/random-numbers-generating-guide.md) (Mechanism for AI to obtain dice rolls)
- `artifacts/farkle-unicode-dice-display.md` (How Unicode dice characters will be used)
- `artifacts/farkle-unicode-dice-render-examples.md` (Examples of dice rendering with Markdown)
- `ai-guides/contrib/games/farkle-playing-guide.md` (To be created: The new AI Guide)
- [`ai-guides/contrib/command-output-issues-handling-guide.md`](../../../../ai-guides/contrib/command-output-issues-handling-guide.md) (Reference for `.tmp_ai_output/` usage)
- `artifacts/sparkle-game-rules.md` (Rules for the new "Sparkle" themed game)
- `.tmp_ai_output/s076-farkle-test-log.jsonl` (To be created: Example game log from testing)

## Acceptance Criteria

**IMPORTANT:** As you complete each Acceptance Criterion below, you **MUST** mark it by changing `- [ ]` to `- [x]` (or `- [X]`).

- [ ] **Checkpoint: Initial Story Setup**

  - [x] **Process:** The '`stories-working-guide.md`' AI Guide has been consulted for current best practices.
  - [x] **Process:** Story status is updated to "In Progress" in this `story.md` file's frontmatter upon starting work.
  - [x] **Process:** A new journal entry is _appended_ to `journal.md` for this story, noting work has commenced.
  - [x] **Process:** User confirms the overall Acceptance Criteria list for this story is accurate and complete.
  - [x] **Process:** All ACs within this 'Initial Story Setup' Checkpoint are reviewed with the user and marked as complete (`- [x]`).
  - [x] **Process:** Journal updated.
  - [x] **Process:** User approval obtained to proceed.

- [ ] **Checkpoint: Research Sparkle Game Mechanics & AI Interaction**

  - [x] Research and document the rules for "Sparkle" (themed Farkle).
  - [x] Define the structure for the line-delimited JSON game state log.
  - [x] Investigate and propose a mechanism for the AI to obtain PRNG-based dice rolls (representing emoji faces).
  - [x] Outline how emoji dice characters (defined in `artifacts/sparkle-game-rules.md`) will be used to display game state.
  - [x] Document core findings in artifact files: `artifacts/sparkle-game-rules.md`, `artifacts/sparkle-ai-interaction-points.md`, `artifacts/sparkle-json-log-structure.md`. (Note: PRNG mechanism for dice rolls is defined by [`ai-guides/contrib/random-numbers-generating-guide.md`](../../../../ai-guides/contrib/random-numbers-generating-guide.md)).
  - [x] User reviews research findings (now focused on "Sparkle").
  - [x] **Process:** All ACs within this Checkpoint are reviewed with the user and marked as complete.
  - [x] **Process:** Journal updated.
  - [x] **Process:** User approval obtained to proceed.

- [ ] **Checkpoint: Design Sparkle Playing AI Guide**

  - [x] **Process:** The [`ai-guides-collaborative-designing-guide.md`](../../../../ai-guides/core/ai-guides/ai-guides-collaborative-designing-guide.md) has been consulted.
  - [x] Draft the `ai-guides/contrib/games/sparkle-playing-guide.md`.
  - [x] The guide details how the AI should manage the JSON game log for "Sparkle".
  - [x] The guide instructs the AI on simulating dice rolls (representing emoji faces).
  - [x] The guide explains how the AI should use `ask_followup_question` for user's turn choices in "Sparkle".
  - [x] The guide outlines decision-making logic for the AI's own turns in "Sparkle".
  - [x] The guide specifies how to display game state using emoji dice characters (as defined in `artifacts/sparkle-game-rules.md`).
  - [x] The guide recommends storing the append-only JSON game log in the `./.tmp_ai_output/` directory (referencing [`ai-guides/contrib/command-output-issues-handling-guide.md`](../../../../ai-guides/contrib/command-output-issues-handling-guide.md) for context on this directory).
  - [x] The guide explicitly instructs the AI assistant to consult the [`ai-guides/contrib/random-numbers-generating-guide.md`](../../../../ai-guides/contrib/random-numbers-generating-guide.md) for obtaining dice roll outcomes.
  - [x] User reviews the draft "Sparkle Playing AI Guide".
  - [x] **Process:** All ACs within this Checkpoint are reviewed with the user and marked as complete.
  - [x] **Process:** Journal updated.
  - [x] **Process:** User approval obtained to proceed.

- [x] **Checkpoint: Implement and Test Sparkle Playing Guide**

  - [x] User (or AI role-playing as user) attempts to play a game of "Sparkle" with an AI assistant (e.g., in a new chat session) strictly following the `sparkle-playing-guide.md`.
  - [x] The game interaction, including AI's adherence to the guide, dice rolls (emoji faces), user choices, and game state logging (to `./.tmp_ai_output/`), is observed.
  - [x] An example game log is saved to `.tmp_ai_output/s076-sparkle-test-log.jsonl`.
  - [x] Any issues, ambiguities, or areas for improvement in the "Sparkle" guide are identified.
  - [x] The `sparkle-playing-guide.md` is iteratively refined based on testing feedback.
  - [x] User confirms the "Sparkle" guide is effective and the game can be played successfully.
  - [x] **Process:** All ACs within this Checkpoint are reviewed with the user and marked as complete.
  - [x] **Process:** Journal updated.
  - [x] **Process:** User approval obtained to proceed.

- [x] **Checkpoint: Story Review and Retrospective**

  - [x] **Process:** AI performs an internal reflection on the completed story.
  - [x] **Process:** AI appends its 1-3 specific, actionable suggestions for process improvement to the `journal.md`.
  - [x] **Process:** AI presents a summary of its journaled suggestions to the user.
  - [x] **Process:** AI invites the user to provide their own retrospective feedback.
  - [x] **Process:** AI appends a summary of the user's feedback (if any) to the `journal.md`.
  - [x] **Process:** AI confirms with the user that the retrospective discussion is complete.

- [x] **Checkpoint: Final Review and Closure**
  - [x] **Process:** User confirms all Checkpoints and their ACs are satisfactorily completed.
  - [x] **Process:** Story status is updated to "Done" and `resolution` field is set appropriately.
  - [x] **Process:** All ACs within this Checkpoint are reviewed with the user and marked as complete.
  - [x] **Process:** Journal updated.
